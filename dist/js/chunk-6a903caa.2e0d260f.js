(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a903caa"],{"11eb":function(t,i,e){"use strict";e.d(i,"a",function(){return r});var r=function(){return JSON.parse(localStorage.getItem("userinfo")||"{}")}},"4c37":function(t,i,e){},a88a:function(t,i,e){"use strict";var r=e("4c37"),a=e.n(r);a.a},c173:function(t,i,e){"use strict";e.r(i);var r=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"play"}},[e("div",{staticClass:"w"},[e("div",{staticClass:"video-top"},[e("h4",[t._v(t._s(t.courseName)+"-"+t._s(t.videoTitle))])]),e("div",{attrs:{id:"videos"}}),e("div",{staticClass:"lists"},t._l(t.list,function(i,r){return e("div",{staticClass:"list"},[e("a",{staticClass:"list-video",class:t.current==r?"active":"",attrs:{href:"javascript:;"},on:{click:function(e){t.play(i.id,r)}}},[t._v(t._s(i.name))]),e("a",{staticClass:"list-book",attrs:{href:"javascript:;"},on:{click:function(e){t.lookReader(i.doc_key)}}},[t._v("查看课件")])])}),0)])])},a=[],s=(e("d85c"),e("11eb")),c={name:"playVideo",created:function(){this.init()},data:function(){return{player:null,course_id:this.$route.query.course_id,current:0,courseName:"",list:[],videoTitle:"",videoUrl:"",id:"",cover_url:""}},mounted:function(){},computed:{},watch:{videoTitle:function(t){this.videoTitle=t},videoUrl:function(t){this.videoUrl=t,this.init_player()},id:function(t){this.id=t},cover_url:function(t){this.cover_url=t}},methods:{init:function(){var t=this;this.$axios.post("/chapter/info",{course_id:this.course_id},{headers:{userid:Object(s["a"])().userid,source:Object(s["a"])().source,token:Object(s["a"])().token}}).then(function(i){i.data.result?t.$message.error(i.data.message):(t.courseName=i.data.data.course.name,t.list=i.data.data.list,t.videoTitle=i.data.data.list[t.current].name,t.videoUrl=i.data.data.list[t.current].transcode_info[2],t.id=i.data.data.list[t.current].id,t.cover_url=i.data.data.list[t.current].cover_url)})},play:function(t,i){this.current=i,this.videoTitle=this.list[this.current].name,this.videoUrl=this.list[this.current].transcode_info[2],this.id=this.list[this.current].id,this.cover_url=this.list[this.current].cover_url},lookReader:function(t){this.$router.push("/reader?key=".concat(t))},prepareUrl:function(t,i,e,r,a,s){var c=t.lastIndexOf("/"),n=t.slice(0,c+1);return n=n+"voddrm.token."+i+"_"+e+"_"+r+"_"+a+"_"+s+"."+t.slice(c+1),n},init_player:function(){this.player&&this.player.destroy();var t=this.prepareUrl(this.videoUrl,Object(s["a"])().token,Object(s["a"])().userid,Object(s["a"])().source,this.course_id,this.id);this.player=new TcPlayer("videos",{m3u8:t,autoplay:!1,coverpic:this.cover_url})}}},n=c,o=(e("a88a"),e("25c1")),u=Object(o["a"])(n,r,a,!1,null,null,null);u.options.__file="playVideo.vue";i["default"]=u.exports},d85c:function(t,i,e){var r=e("9ba3").f,a=Function.prototype,s=/^\s*function ([^ (]*)/,c="name";c in a||e("241c")&&r(a,c,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})}}]);